create database PlayMe;
use PlayMe;
show tables;
select * from criartime;
select * from Usuario;

create table Usuario(
	Id int auto_increment primary key,
    nomeUser varchar(100) not null,
    email varchar(100) not null,
    sexo char(1),
    dataNasc date
);

create table Modalidade (
	IdModalidade int auto_increment primary key,
    nomeModalidade varchar(50)
);

create table Categoria (
	IdCategoria int auto_increment primary key,
    nomeCategoria varchar(50)
);

create table Subcategoria (
	IdSubcategoria int auto_increment primary key,
    nomeSubcategoria varchar(50),
    descricao varchar(300)
);

create table CriarTime (
	IdTime int auto_increment primary key,
    IdUsuario int,
    modalidade int,
    categoria int,
    subcategoria int,
    idadeMin int,
    idadeMax int,
    local varchar(200) not null,
    dataJogo date,
    horaJogo time,
    qtdJogadores int not null
);

ALTER TABLE CriarTime
ADD CONSTRAINT fk_CriarTime_Usuario FOREIGN KEY (IdUsuario) REFERENCES Usuario(Id);

ALTER TABLE CriarTime
ADD CONSTRAINT fk_CriarTime_Modalidade FOREIGN KEY (modalidade) REFERENCES Modalidade(IdModalidade);

ALTER TABLE CriarTime
ADD CONSTRAINT fk_CriarTime_Categoria FOREIGN KEY (categoria) REFERENCES Categoria(idCategoria);

ALTER TABLE CriarTime
ADD CONSTRAINT fk_CriarTime_Subcategoria FOREIGN KEY (subcategoria) REFERENCES Subcategoria(idSubcategoria);

insert into Modalidade(nomeModalidade) values ("Futebol");
insert into Modalidade(nomeModalidade) values ("Vôlei");
insert into Modalidade(nomeModalidade) values ("Squash");
insert into Modalidade(nomeModalidade) values ("Ping Pong");
insert into Modalidade(nomeModalidade) values ("Futsal");
insert into Modalidade(nomeModalidade) values ("Video Game");

select * from Modalidade;

insert into Categoria(nomeCategoria) values ("Iniciante");
insert into Categoria(nomeCategoria) values ("Intermediario");
insert into Categoria(nomeCategoria) values ("Avançado");

insert into Subcategoria(nomeSubcategoria) values ("Masculino");
insert into Subcategoria(nomeSubcategoria) values ("Feminino");
insert into Subcategoria(nomeSubcategoria) values ("Misto");
insert into Subcategoria(nomeSubcategoria) values ("Infantil Masculino");
insert into Subcategoria(nomeSubcategoria) values ("Infantil Feminino");
insert into Subcategoria(nomeSubcategoria) values ("Infantil Misto");


insert into CriarTime (idusuario, modalidade, categoria, subcategoria, idadeMin, idadeMax, local, dataJogo, horaJogo, qtdJogadores) 
                    values (1, 1, 1, 1, 18, 40, "Estrada dos mirandas, 200", "2024-04-20", "20:30:00", 22);

SELECT 
    c.IdTime,
    u.nomeUser AS nomeUsuario,
    m.nomeModalidade AS nomeModalidade,
    cat.nomeCategoria AS nomeCategoria,
    sub.nomeSubcategoria AS nomeSubcategoria,
    c.idadeMin,
    c.idadeMax,
    c.local,
    c.dataJogo,
    c.horaJogo,
    c.qtdJogadores
FROM 
    CriarTime c
JOIN 
    Usuario u ON c.IdUsuario = u.Id
JOIN 
    Modalidade m ON c.modalidade = m.IdModalidade
JOIN 
    Categoria cat ON c.categoria = cat.idCategoria
JOIN 
    Subcategoria sub ON c.subcategoria = sub.idSubcategoria;
